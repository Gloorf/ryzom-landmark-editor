/**
 * Ryzom Maps
 *
 * @author Meelis Mägi <nimetu@gmail.com>
 * @copyright (c) 2014 Meelis Mägi
 * @license http://opensource.org/licenses/LGPL-3.0
 */
/*
 * Function: OpenLayers.Geometry
 *
 * Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */

eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('4 1i={};1i.1m={};1i.1m.3d=c(q,V){4 X=1i.1m.3z(q,V);X.A=u.4W(X.A);8 X};1i.1m.3z=c(q,V){4 2n=q.x;4 2l=q.y;4 E=V.E;4 D=V.D;4 P=V.P;4 O=V.O;4 1C=P-E;4 1D=O-D;4 W=((1C*(2n-E))+(1D*(2l-D)))/(u.1t(1C,2)+u.1t(1D,2));4 x,y;7(W<=0.0){x=E;y=D}1X 7(W>=1.0){x=P;y=O}1X{x=E+W*1C;y=D+W*1D}8{A:u.1t(x-2n,2)+u.1t(y-2l,2),x:x,y:y,W:W}};3U.f={r:G,2x:\'3K://3M.3P.3Q/\',3u:\'3b/{1p}/{18}/{z}/{x}/{y}.{25}\',3r:c(x,y){4 1f=f.U.3o(x,y);8 N L.3p(1f.x,1f.y)},3w:c(x,y){4 1f=f.U.3n(x,y);8 N L.3l(1f.x,1f.y)},2X:\'f\'};f.U={3W:10,1c:{},1b:{},21:c(13,3j){d.1c=d.2q(13);d.1b=d.2q(3j)},3s:c(x,y){8 d.1a(x,y,d.1b)},4G:c(x,y){8 d.1a(x,y,d.1c)},4U:c(x,y){8 d.1u(x,y,d.1b)},4V:c(x,y){8 d.1u(x,y,d.1c)},3o:c(x,y){8 d.2e(x,y,d.1b,d.1c)},3n:c(x,y){8 d.2e(x,y,d.1c,d.1b)},4N:c(x,y){4 k=d.2u(x,y,f.U.4B);8 k.3h(c(a,b){8 a.1F<b.1F})},2q:c(13){4 X={};M(4 g 1B 13){7(13.1x(g)){4 n,1d,h;4 C=13[g][0];4 B=13[g][1];n=L.n(C,B);h=n.2d();1d=[{E:C[0],D:B[1],P:C[0],O:C[1]},{E:C[0],D:C[1],P:B[0],O:C[1]},{E:B[0],D:C[1],P:B[0],O:B[1]},{E:B[0],D:B[1],P:C[0],O:B[1]}];X[g]={n:n,h:h.x*h.y,1d:1d}}}8 X},2g:c(x,y,o){c 3g(i,j){8 o[i].h-o[j].h}4 m=[];4 p=L.q(x,y);M(4 g 1B o){7(o.1x(g)){7(o[g].n.4r(p)){m.1j(g)}}}m.3h(3g);7(m.T==0||m[m.T-1]!=\'14\'){m.1j(\'14\')}7(f.r)t.s(\'(2g) 8\',m,\', 4A 4j \',[x,y,o]);8 m},1u:c(x,y,o){7(f.r)t.s(\'(1u) 3c\',[x,y]);4 w={J:[],A:4k,x:2s,y:2s};4 q=L.q(x,y);M(4 g 1B o){7(g==\'14\'||g==\'17\'){4l}7(o.1x(g)){4 1w=o[g];M(4 i=0,3f=1w.1d.T;i<3f&&w.A>0;i++){4 15=1i.1m.3d(q,1w.1d[i]);7(15.A<w.A){7(f.r)t.s(\'>> N k\',[g,15,i],\'4n\',w);w.J=g;w.A=15.A;w.x=15.x;w.y=15.y}}}}7(f.r)t.s(\'(4o) 8\',w);8 w},1a:c(x,y,o,S){S=S!==2C?S:4p;7(f.r)t.s(\'(1a) 3c\',[x,y,o,S]);4 m=d.2g(x,y,o);7(S&&(m.T==0||m[0]==\'14\')){7(f.r)t.s(\'>> 1w k 4i 1z, 4q 4s 4t S 1w\');4 k=d.1u(x,y,o);7(m.T==0||k.A<=S){m=[k.J,\'14\']}}7(f.r)t.s(\'(1a) 8\',[x,y],\'m\',m);8 m},2e:c(x,y,1I,1V){7(f.r)t.s(\'(31)\',[x,y]);4 Z,1v,K;4 1h=d.1a(x,y,1I);M(4 i=0;i<1h.T;i++){K=1h[i];7(1V[K]!==2C){7(f.r)t.s(\'>> 1I 4u 1V 4v 4w\',[K]);Z=1I[K];1v=1V[K];3e}}7(!Z){7(f.r)t.s(\'4x: 4y k\',[Z,1v,K,1h]);8{x:0,y:0}}4 2f=Z.n.2d();4 3E=Z.n.2F();4 3I=Z.n.4z();4 28=(x-3E.x)/2f.x;4 2c=(y-3I.y)/2f.y;7(f.r)t.s(\'>> 4O\',[x,y],[28.2E(3),2c.2E(3)],[K]);4 1Y=1v.n.2d();4 29=1v.n.2F();4 2v=29.x+28*1Y.x;4 2w=29.y-2c*1Y.y;7(f.r)t.s(\'(31) 8\',[2v,2w]);8{x:u.2S(2v),y:u.2S(2w)}},2u:c(x,y,19,k){k=k||[];M(4 g 1B 19){7(19.1x(g)){4 1s=19[g];7(d.2T(x,y,1s.Y)){k.1j({4m:g,1F:1s.1F});7(1s.1x("19")){k=d.2u(x,y,1s.19,k)}}}}8 k},2T:c(x,y,Y){4 1A=Y.T;7(1A<6){8 G}4 1P=G;M(4 i=0,j=1A-2;i<1A;j=i,i+=2){4 2p=Y[i],1Q=Y[i+1];4 2U=Y[j],2r=Y[j+1];7(((1Q>y)!=(2r>y))&&(x<(2U-2p)*(y-1Q)/(2r-1Q)+2p)){1P=!1P}}8 1P},2X:\'f.U\'};(c(){t.s(\'f.U.21\');4 27={"17":[[0,30],[30,0]],"3G":[[4T,4S],[4R,4Q]],"2N":[[4P,4g],[4M,4D]],"2G":[[4L,4K],[4J,4I]],"2J":[[4H,4F],[4E,4C]],"37":[[4h,4b],[4f,3R]],"2L":[[3V,3X],[3T,3S]],"2M":[[3O,3N],[3L,3Z]],"2Q":[[48,4e],[4d,2P]],"2O":[[4c,3Y],[4a,49]],"2H":[[0,47],[35,40]],"2K":[[46,2k],[45,2o]],"2Y":[[44,2k],[43,2o]],"34":[[42,2k],[41,2o]],"14":[[-38,2I],[0,0]]};4 3F={"14":[[0,-2I],[38,0]],"3G":[[2Z,-4Y],[5o,-6u]],"2N":[[1S,-36],[6v,-1S]],"2G":[[6w,-6x],[6y,-6z]],"2J":[[6t,-6A],[6C,-6D]],"6E":[[6F,-6G],[6H,-6I]],"2L":[[6B,-26],[1Z,-1E]],"2M":[[6r,-2V],[6i,-6q]],"2O":[[6b,-26],[1N,-1E]],"2Q":[[6c,-2Z],[2t,-6d]],"37":[[36,-6e],[1E,-6f]],"6g":[[6a,-2y],[33,-35]],"6h":[[6j,-1N],[1N,-2y]],"6K":[[6l,-6m],[2b,-2R]],"6n":[[33,-6o],[2P,-2b]],"6p":[[6J,-6s],[6L,-6S]],"75":[[76,-77],[78,-7b]],"4X":[[2W,-7a],[73,-6U]],"72":[[6N,-6O],[2W,-6P]],"6Q":[[2V,-6R],[3a,-6M]],"6T":[[6W,-6X],[6Y,-6Z]],"70":[[7e,-2t],[71,-6V]],"7d":[[7c,-2y],[74,-79]],"6k":[[69,-1N],[5y,-67]],"5i":[[1E,-2b],[5j,-2R]],"2Y":[[5k,-1Z],[5l,-1S]],"34":[[5m,-1Z],[5n,-1S]],"2H":[[5h,-68],[26,-5q]],"2K":[[5r,-3a],[2t,-5s]]};5t 27[\'17\'];f.U.21(27,3F)})();f.R=c(3B,9){9=L.1r({1q:\'17\',20:1y,3J:1y,22:\'5u\',1O:f.2x+f.3u,5v:[5p,-5f],1H:5,57:3,5e:12,1k:[]},9);7(9.1q==\'17\'){9.3C=L.1g.1R}1X{9.3C=L.1g.1l}4 1e={};4 2a={};4 1L=G,1J=G,1W=G;7(9.20){1L=f.1o(9.1O,{1p:9.1q});9.1k.1j(1L);1e[\'3D\']=1L}7(9.3J){1J=f.1o(9.1O,{1p:9.1q,18:\'50\'});7(!9.20){9.1k.1j(1J)}1e[\'39\']=1J}7(9.22){1W=f.1o(9.1O,{1p:9.1q,18:\'3H\'+9.22});9.1k.1j(1W);2a[\'51\']=1W}4 R=N L.52(3B,9);7(1e[\'3D\']&&1e[\'39\']){L.3m.1k(1e,2a).53(R)}8 R};f.1o=c(I,9){7(2B I=="54"){9=I;I=f.55}9=L.1r({1p:\'17\',18:\'4Z\',56:1y,58:1},9);4 23=9.18&&9.18.k(/^3H/);7(!9.3x){9.3x=23?12:11}7(!9.25){9.25=23?\'3i\':\'59\'}8 L.1o(I,9)};f.2h=c(J,H,h){J=J||\'2z\';4 2A=[\'5a\',\'5b\',\'5c\',\'2z\',\'5d\',\'5w\',\'5g\',\'5x\',\'5Q\',\'5S\',\'5T\',\'5U\',\'5V\'];4 1z=G;M(4 i=0;i<2A.T;++i){7(2A[i]==J){1z=1y;3e}}7(!1z){J=\'2z\'}7(2B H=="5W"){h=H;H=G}7(H&&!H.k(/^[0-5X-5R-F]{3}$/)){H=G}7(2B h=="2C"){h=24}7(h!=16&&h!=24&&h!=32){h=24}4 1U=u.1n(h/2);4 I=f.2x+\'3b/2h/\'+h+\'/\';7(H){I+=H+\'/\'}I+=J+\'.3i\';8 L.2h({5Y:I,60:[h,h],61:[1U,1U],62:[0,-1U]})};L.3k.63=L.3k.1r({9:{64:\'65\',2D:2s},66:c(R){d.1K=L.5Z.5P(\'5H\',\'5O-3m-5A\');L.5B.5C(d.1K);R.5D(\'3q\',d.2m,d);8 d.1K},5E:c(R){R.5F(\'3q\',d.2m)},2m:c(e){4 x=u.1n(e.v.1T);4 y=u.1n(e.v.1G);4 1h=f.U.3s(e.v.1T,e.v.1G);4 2i=\'x:\'+x+\', y:\'+y+\' (\'+1h.5z(\',\')+\')\';4 p=d.5G.2j(e.v,10);2i+="<5I>5J @(1H=10): x:"+u.1n(p.x)+\', y:\'+u.1n(p.y);7(d.9.2D){d.9.2D.5K(l)}d.1K.5L=2i}});L.1M.1l={2j:c(v){8 N L.3p(v.1T,v.1G)},3t:c(q){8 N L.3l(q.x,q.y)},n:(c(){8 L.n([-Q,-Q],[Q,Q])})()};L.1M.1R={2j:c(v){8 f.3r(v.1T,v.1G)},3t:c(q){8 f.3w(q.x,q.y)},n:(c(){8 L.n([-Q,-Q],[Q,Q])})()};L.1g.1l=L.1r({},L.1g,{3v:L.1M.1l,3y:N L.3A(1,0,-1,0),5M:c(1H){8 u.1t(2,1H)/5N}});L.1g.1R=L.1r({},L.1g.1l,{3v:L.1M.1R,3y:N L.3A(1,0,1,0)});',62,449,'||||var|||if|return|options|||function|this||Ryzom|prop|size|||match||matches|bounds|zones||point|DEBUG|debug|console|Math|latlng|current||||distance|rt|lb|y1|x1||false|color|uri|name|zonename||for|new|y2|x2|100000|map|closest|length|XY|segment|along|result|points|srczone||||wz|grid|dist||world|style|areas|_belongsTo|ingame_coordinates|outgame_coordinates|segments|tileLayers|xy|CRS|regions|OpenLayers|push|layers|RyzomServer|Geometry|floor|tileLayer|mode|rzMode|extend|area|pow|_findClosest|dstzone|zone|hasOwnProperty|true|found|nbPoints|in|dx|dy|9760|order|lng|zoom|src|satLayer|_container|worldLayer|Projection|3840|rzTileUri|success|iY|RyzomWorld|320|lat|halfSize|dst|langLayer|else|dstSize|1600|rzWorld|initialize|rzLang|isLang||ext|11360|worldZones|pLeft|dstBottomLeft|overlays|4320|pTop|getSize|_project|srcSize|_getZones|icon|html|project|15880|y0|_onMouseMove|x0|14600|iX|_build|jY|null|3040|_matchAreas|left|top|apiDomain|3680|lm_marker|iconNames|typeof|undefined|marker|toFixed|getBottomLeft|continent_tryker|cont_newbieland|47520|continent_zorai|cont_kitiniere|continent_bagne|continent_route_gouffre|continent_matis|continent_sources|4960|continent_terre|4000|round|_inPolygon|jX|16960|18000|CLASS_NAME|place_matis_island_1|15840|14160|fromToZone||4800|place_matis_island_2|3200|7840|continent_nexus|108000|Satellite|17440|maps|enter|distanceToSegment|break|len|compare|sort|png|sz|Control|LatLng|control|fromOutgameToIngame|fromIngameToOutgame|Point|mousemove|pixel|findIngameRegion|unproject|tilePath|projection|location|maxNativeZoom|transformation|distanceSquaredToSegment|Transformation|id|crs|Atys|srcBottomLeft|serverZones|continent_fyros|lang_|srcTopRight|rzSatellite|https|7712|api|11504|5792|bmsite|net|5656|3740|9512|window|8392|BASE_ZOOM|5340|8600|4144|14300|13840|12880|9780|8500|6280|5000|16380|2372|7000|1972|7896|692|5252|7680|10116|7872|8196|not|was|Infinity|continue|key|replacing|find_closest|80|try|contains|to|find|and|both|have|ERROR|no|getTopRight|input|ingame_areas|8840|352|5788|13800|findOutgameRegion|188|8224|13956|13664|7716|13680|findIngameAreas|source|7760|636|7400|3836|2920|findClosestIngameRegion|findClosestOutgameRegion|sqrt|place_avendale|27040|atys|atys_sp|Labels|Map|addTo|object|TILE_URI|continuousWorld|minZoom|zIndex|jpg|building|camp|dig|mektoub|maxZoom|12500|op_townhall|8160|place_min_cho|10080|14080|15360|15680|16640|20320|6500|10240|1760|16160|delete|en|center|npc|portal|8960|join|mouseposition|DomEvent|disableClickPropagation|on|onRemove|off|_map|div|br|Image|setLatLng|innerHTML|scale|1024|leaflet|create|spawn|zA|tp_kami|tp_karavan|egg|question|number|9a|iconUrl|DomUtil|iconSize|iconAnchor|popupAnchor|MousePosition|position|bottomright|onAdd|3520|12320|8640|4640|2560|160|13120|8320|6080|place_yrkanis|place_natae|7360|3600|place_jen_lai|4160|4240|place_avalae|4480|place_dyron|9600|5440|24800|6880|23840|6240|13760|34880|20000|29440|5920|480|12480|960|place_pyr|18400|24720|19040|24240|16480|place_davae|16720|32720|17760|32000|31760|place_fairhaven|33280|24480|place_windermeer|30960|2720|15440|33120|15760|32880|place_zora|8800|place_crystabell|18240|9680|place_thesos|19520|26400|19760|3360|31200|26080|9440|place_hoi_cho|8480'.split('|'),0,{}))
